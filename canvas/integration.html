<html>
<body>
	<style>
		#container {
			background-color: #F4F0F8;
			width: 100%;
			height: 100%;
		}
		.ideaInput {
			position: absolute;
			border: none;
			z-index: 999;
			background-color: transparent;
			color: #F8F8F8;
			font-family: 'Helvetica';
			font-weight: bold;
			font-size: 13;
			text-align: center;
			resize: none;
		}
		.ideaInput:focus {
			outline: none;
		}
	</style>
	<input type="button" onclick="mapModel.removeSubIdea()" value="delete"></input>
	<input type="button" onclick="mapModel.editNode()" value="edit"></input>
	<input type="button" onclick="mapModel.clear()" value="clear"></input>
	<div id="container"></div>
	<script type="text/javascript" src="../lib/jquery-1.8.3.js"></script>
	<script type="text/javascript" src="../lib/jquery.ba-resize.min.js"></script>
	<script type="text/javascript" src="../lib/underscore-1.4.3-min.js"></script>
	<script type="text/javascript" src="../lib/kinetic-v4.2.0.js"></script>
	<script type="text/javascript" src="../src/observable.js"></script>
	<script type="text/javascript" src="../src/kinetic.idea.js"></script>
	<script type="text/javascript" src="../src/kinetic.connector.js"></script>
	<script type="text/javascript" src="../src/content.js"></script>
	<script type="text/javascript" src="../src/layout.js"></script>
	<script type="text/javascript" src="../src/map-model.js"></script>
	<script type="text/javascript" src="../test/testtree2.js"></script>
	<script type="text/javascript" src="kinetic-mediator.js"></script>
	<script>
		(function () {
			var container = jQuery('#container'),
				stage = new Kinetic.Stage({
					container: 'container',
					draggable: true
				}),
				idea = content(test_tree()),
				dimensionProvider = function (title) {
					var text = new Kinetic.Idea({
						text: title
					});
					return {
						width: text.getWidth(),
						height: text.getHeight()
					};
				},
				mapModel = new MAPJS.MapModel(function layoutCalculator(idea) {
					return MAPJS.calculateLayout(idea, dimensionProvider);
				}),
				mediator = new MAPJS.KineticMediator(mapModel, stage),
				setStageDimensions = function () {
					stage.setWidth(container.width());
					stage.setHeight(container.height());
					stage.attrs.x = 0.5 * stage.getWidth();
					stage.attrs.y = 0.5 * stage.getHeight();
				};
			setStageDimensions();
			mapModel.setIdea(idea);
			container.resize(setStageDimensions);
			window.mapModel = mapModel;
		}());
	</script>
</body>
</html>

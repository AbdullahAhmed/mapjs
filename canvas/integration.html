<html>
<body>
	<style>
		.ideaInput {
			position: absolute;
			border: none;
			z-index: 999;
			background-color: transparent;
			color: #555;
			font-family: 'Calibri';
			font-style: italic;
			font-size: 15;
			text-align: center;
		}
		.ideaInput:focus {
			outline: none;
		}
	</style>
	<div id="container"></div>
	<ul>
		<li>bug: quickly adding children (animation interrupted)</li>
		<li>usability: add sibling of the currently active element on enter (not a child), give focus to newly created node</li>
		<li>move between left and right (flip)</li>
		<li>multiline</li>
		<li>viewport</li>
	</ul>
	<script type="text/javascript" src="../lib/jquery-1.8.3.js"></script>
	<script type="text/javascript" src="../lib/underscore-1.4.3-min.js"></script>
	<script type="text/javascript" src="../lib/kinetic-v4.2.0.js"></script>
	<script type="text/javascript" src="../src/observable.js"></script>
	<script type="text/javascript" src="../src/kinetic.bezier.js"></script>
	<script type="text/javascript" src="../src/kinetic.idea.js"></script>
	<script type="text/javascript" src="../src/kinetic.connector.js"></script>
	<script type="text/javascript" src="../src/content.js"></script>
	<script type="text/javascript" src="../src/layout.js"></script>
	<script type="text/javascript" src="../src/map-model.js"></script>
	<script type="text/javascript" src="../test/testtree.js"></script>
	<script type="text/javascript" src="kinetic-mediator.js"></script>
	<script>
		(function () {
			var stage = new Kinetic.Stage({
				container: 'container',
				width: 2048,
				height: 2048,
				draggable: false
			}),
				layer = new Kinetic.Layer(),
				idea = content(test_tree()),
				dimensionProvider = function (title) {
					var text = new Kinetic.Idea({
						text: title
					});
					return {
						width: text.getWidth(),
						height: text.getHeight()
					};
				},
				mapModel = new MAPJS.MapModel(function layoutCalculator(idea) {
					return MAPJS.calculateLayout(idea, dimensionProvider);
				}),
				mediator = new MAPJS.KineticMediator(mapModel, layer);
			stage.add(layer);
			mapModel.setIdea(idea);
			// [
			// 	mapModel.selectNode.bind(mapModel, 1),
			// 	mapModel.updateTitle.bind(mapModel, 'Hello 001'),
			// 	mapModel.addSubIdea.bind(mapModel, 'World 2'),
			// 	mapModel.addSubIdea.bind(mapModel, 'Third 3'),
			// 	mapModel.addSubIdea.bind(mapModel, 'Fourth 4'),
			// 	mapModel.selectNode.bind(mapModel, 4),
			// 	mapModel.addSubIdea.bind(mapModel, 'Fifth 5'),
			// 	idea.positionBefore.bind(idea, 3, 2),
			// 	idea.changeParent.bind(idea, 3, 2),
			// 	mapModel.selectNode.bind(mapModel, 3),
			// 	mapModel.removeSubIdea.bind(mapModel)
			// ].forEach(function (command, index) {
			// 	setTimeout(command, 1000 * (index + 1));
			// });
		}());
	</script>
</body>
</html>
